<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lista de la compra y cosas para llevar - Halloween</title>
<link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
<style>
  :root { --orange:#ff7518; --bg:#1a1a1a; --muted:#888; }
  * { box-sizing:border-box; }
  body {
    font-family: 'Creepster', cursive;
    background: var(--bg);
    color:#f5f5f5;
    margin:0; padding:24px;
    display:flex; align-items:center; justify-content:center;
    min-height:100vh;
  }
  .app {
    width:100%; max-width:560px; background:rgba(0,0,0,.35);
    border:1px solid #2a2a2a; border-radius:14px; padding:22px 20px 16px;
    box-shadow:0 10px 30px rgba(0,0,0,.5);
  }
  h1 { margin:0 0 8px; color:var(--orange); text-shadow:2px 2px 6px #000; text-align:center }
  .row { display:flex; gap:8px; margin:10px 0 16px; }
  input[type="text"]{
    flex:1; padding:12px 14px; border-radius:10px; border:1px solid #333;
    background:#101010; color:#f5f5f5; outline:none;
  }
  button {
    border:0; border-radius:10px; padding:12px 14px; cursor:pointer; font-weight:700;
    background:var(--orange); color:#fff; transition:filter .15s ease;
  }
  button:hover { filter:brightness(.92); }
  ul { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px; }
  li {
    display:flex; align-items:center; justify-content:space-between;
    border:1px solid var(--orange); border-radius:10px;
    padding:10px 12px; background:rgba(255,117,24,.08);
  }
  .left { display:flex; align-items:center; gap:10px; }
  input[type="checkbox"] { transform:scale(1.4); }
  .checked span { text-decoration:line-through; color:var(--muted); }
  .delete { background:#c0392b; }
  .delete:hover { filter:brightness(.9); }
  .empty { text-align:center; color:#bcbcbc; padding:10px 0; }
</style>
</head>
<body>
  <div class="app">
    <h1>🎃 Lista de Halloween 👻</h1>

    <div class="row">
      <input id="item-input" type="text" placeholder="Añadir nuevo elemento...">
      <button id="add-btn">Agregar</button>
    </div>

    <ul id="list"></ul>
    <p id="empty" class="empty" style="display:none;">(Vacío… añade algo arriba)</p>
  </div>

  <script>
    (function(){
      const STORAGE_KEY = "halloweenList_v1";
      const $input = document.getElementById("item-input");
      const $add   = document.getElementById("add-btn");
      const $list  = document.getElementById("list");
      const $empty = document.getElementById("empty");

      // Cargar desde localStorage
      let items = [];
      try {
        items = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
      } catch(e) { items = []; }

      function save(){
        localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
      }

      function render(){
        $list.innerHTML = "";
        if (items.length === 0) {
          $empty.style.display = "block";
          return;
        }
        $empty.style.display = "none";

        items.forEach((it, idx) => {
          const li = document.createElement("li");
          if (it.checked) li.classList.add("checked");

          const left = document.createElement("div");
          left.className = "left";

          const cb = document.createElement("input");
          cb.type = "checkbox";
          cb.checked = !!it.checked;
          cb.addEventListener("change", () => {
            items[idx].checked = cb.checked;
            save(); render();
          });

          const span = document.createElement("span");
          span.textContent = it.text;

          left.appendChild(cb);
          left.appendChild(span);

          const del = document.createElement("button");
          del.textContent = "🗑️";
          del.className = "delete";
          del.title = "Eliminar";
          del.addEventListener("click", () => {
            items.splice(idx, 1);
            save(); render();
          });

          li.appendChild(left);
          li.appendChild(del);
          $list.appendChild(li);
        });
      }

      function addItem(){
        const text = ($input.value || "").trim();
        if (!text) return;
        items.unshift({ text, checked:false });
        $input.value = "";
        save(); render();
        $input.focus();
      }

      $add.addEventListener("click", addItem);
      $input.addEventListener("keydown", e => { if (e.key === "Enter") addItem(); });

      render();
    })();
  </script>
</body>
</html>
